# Neorem - Core Functionalities & Modules

Each module includes:

- Functional requirements
- Database tables/entities
- API endpoints (RESTful)
- Integration points
- Dependencies on other modules

## UX / System Behaviors

- **Cascading context/auto-fill:** property → building → floor → unit → lease → payment → work order → document/notification (IDs, addresses, ownership/manager, portfolio).
- **Patterned generation:** floor counts (1..N), unit numbering schemes (101/102… with wings/prefixes/leading zeros), bulk create/edit with shared patterns and defaults.
- **Drafts/state persistence:** auto-save every step, restore on refresh/back, preserve filters/search scope, unsaved-change warnings, resume-in-progress.
- **Validation/guardrails:** cross-entity consistency, no overlapping active leases per unit, type-based required fields, duplicate detection, availability checks before leasing, attachment/type/size rules.
- **RBAC-aware UX:** scope selectors to assigned portfolios/properties/buildings; hide/lock fields/actions per role; mask sensitive fields; contextual access prompts if allowed; client access restrictions (clients see property interests only, no visit schedules).
- **Audit/safety nets:** audit logs with before/after, soft delete + restore via recycle bin, conflict detection, double-confirm high-risk actions, integrity health checks. Recycle bin stores all deleted records (deleted_at timestamp), only Super Admin can permanently delete from recycle bin.
- **Templates/cloning:** lease/notice/work-order templates with merge tags; clone entities with selectable fields; snippet library; versioned/permissioned templates.
- **Workflow accelerators:** one-click create lease from unit, payment from lease, work order from request (carry attachments/priority); renewal/amendment wizards with diffs; move-in/out checklists auto-attached.
- **Communications:** notification/email/SMS/WhatsApp templates auto-filled; delivery status with retries/fallbacks; e-sign routing auto-filled with reminders/escalations.
- **Payments/billing:** auto charges from lease schedules, proration, late-fee rules with grace, autopay defaults, partial payments; bank-feed matching with confidence scoring.
- **Maintenance:** auto-assign by property/category/SLA/on-call, escalation near breach, job-type checklists, parts/labor presets; offline/mobile-friendly capture where applicable.
- **Performance/resilience:** optimistic saves with rollback, background jobs with status, retry/backoff for outbound calls/webhooks, pagination/virtualization for large lists.
- **Recommendations** (phase later as needed): AI-powered recommendations using vector matching - rent comps/suggestions, vendor recommendations by SLA/performance, renewal uplift suggestions, maintenance triage hints. Uses pre-trained embedding models for similarity matching.

## 1. User Management & Authentication [MVP]

### Functional Requirements

- User account creation, management, and profile settings
- Secure authentication with email/password, 2FA (TOTP/WhatsApp), and SSO (SAML 2.0, OAuth 2.0)
- Password reset via secure email links with expiration
- Session management with configurable timeout periods
- User onboarding workflow with guided setup and welcome emails
- Bulk user import via CSV/Excel
- User profile management with contact information and preferences

### Database Tables

- `users` (id, organization_id, name, email, password_hash, phone, auth_provider, two_factor_enabled, status, last_login_at, email_verified_at, created_at, updated_at, deleted_at)
- `user_sessions` (id, user_id, token, expires_at, ip_address, user_agent, created_at)
- `password_resets` (id, user_id, token, expires_at, used_at, created_at)

### API Endpoints

- `POST /api/auth/register`
- `POST /api/auth/login`
- `POST /api/auth/logout`
- `POST /api/auth/forgot-password`
- `POST /api/auth/reset-password`
- `POST /api/auth/verify-2fa`
- `GET /api/users` (list)
- `POST /api/users` (create)
- `GET /api/users/{id}` (get)
- `PUT /api/users/{id}` (update)
- `DELETE /api/users/{id}` (delete)
- `POST /api/users/bulk-import`

### Integration Points

- Email service (SendGrid/Mailgun) for password reset emails
- WhatsApp API (Meta Business API) for 2FA codes
- SSO providers (SAML 2.0, OAuth 2.0)

### Dependencies

- Organization module (for multi-tenant isolation)
- RBAC module (for role assignment)

## 2. Role-Based Access Control (RBAC) [MVP]

### Functional Requirements

- Define standard user roles with granular permissions (create, read, update, delete, approve)
- Custom role creation with configurable permission sets
- Property-level and portfolio-level access restrictions
- Data isolation between tenants in multi-tenant architecture
- Comprehensive audit logs of all user actions and access
- Role assignment and permission management

### Database Tables

- `roles` (id, organization_id, name, code, description, is_system_role, created_at, updated_at)
- `permissions` (id, name, code, resource_type, action, description, created_at, updated_at)
- `user_roles` (id, user_id, role_id, assigned_at, assigned_by, expires_at, created_at)
- `role_permissions` (id, role_id, permission_id, created_at)
- `user_property_assignments` (id, user_id, property_id, portfolio_id, access_level, assigned_at, assigned_by, expires_at, created_at)
- `audit_logs` (id, organization_id, user_id, action, entity_type, entity_id, changes, ip_address, user_agent, created_at)

### API Endpoints

- `GET /api/roles` (list)
- `POST /api/roles` (create)
- `GET /api/roles/{id}` (get)
- `PUT /api/roles/{id}` (update)
- `DELETE /api/roles/{id}` (delete)
- `GET /api/permissions` (list)
- `POST /api/users/{id}/roles` (assign role)
- `DELETE /api/users/{id}/roles/{role_id}` (remove role)
- `POST /api/users/{id}/properties/{property_id}/assign` (assign property access)
- `GET /api/audit-logs` (list with filters)

### Integration Points

- All modules enforce RBAC checks
- Audit logging integrated with all operations

### Dependencies

- User Management module
- Organization module

## 3. Portfolio Management [MVP]

### Functional Requirements

- Create and manage property portfolios (logical grouping of properties)
- Portfolio-level dashboards and analytics with KPIs
- Comparative analysis across portfolios
- Property assignment to multiple portfolios for flexible organization
- Portfolio performance metrics and strategic reporting
- Portfolio ownership and management assignment

### Database Tables

- `portfolios` (id, organization_id, name, code, description, owner_id, portfolio_manager_id, status, created_at, updated_at, deleted_at)
- `portfolio_properties` (id, portfolio_id, property_id, assigned_at, assigned_by, created_at) [for multi-portfolio assignment]

### API Endpoints

- `GET /api/portfolios` (list)
- `POST /api/portfolios` (create)
- `GET /api/portfolios/{id}` (get)
- `PUT /api/portfolios/{id}` (update)
- `DELETE /api/portfolios/{id}` (delete)
- `GET /api/portfolios/{id}/properties` (list properties)
- `POST /api/portfolios/{id}/properties` (assign property)
- `DELETE /api/portfolios/{id}/properties/{property_id}` (unassign property)
- `GET /api/portfolios/{id}/dashboard` (dashboard data)
- `GET /api/portfolios/{id}/analytics` (analytics)

### Integration Points

- Property module (for property assignment)
- Reporting module (for analytics)
- RBAC module (for access control)

### Dependencies

- Property Management module
- RBAC module
- Reporting & Analytics module

## 4. Property Management [MVP]

### Functional Requirements

- Property registration with comprehensive information (address, type, classification, ownership)
- Geocoding validation and address verification
- Bulk property import via CSV/Excel with data validation
- Property information management with version history and audit logs
- Hierarchical property structures (portfolio > property > building > floor > unit)
- Property status tracking (active, inactive, under renovation, for sale, sold)
- Property documents management (deeds, inspections, permits, certificates)
- Property valuation tracking and market analysis data

### Database Tables

- `properties` (id, organization_id, portfolio_id, owner_id, property_manager_id, name, code, address fields, geocoding, property_type, status, ownership_entity, tax_id, year_built, total_sqft, total_units, created_at, updated_at, deleted_at)
- `property_history` (id, property_id, field_name, old_value, new_value, changed_by, changed_at) [for version history]

### API Endpoints

- `GET /api/properties` (list with filters)
- `POST /api/properties` (create)
- `GET /api/properties/{id}` (get)
- `PUT /api/properties/{id}` (update)
- `DELETE /api/properties/{id}` (delete)
- `POST /api/properties/bulk-import`
- `GET /api/properties/{id}/history` (version history)
- `GET /api/properties/{id}/documents` (list documents)
- `POST /api/properties/{id}/documents` (upload document)
- `GET /api/properties/{id}/analytics` (property analytics)

### Integration Points

- Geocoding service (Google Maps, Mapbox) for address validation
- Document Management module (for file storage)
- Unit Management module (for unit creation)
- Reporting module (for analytics)

### Dependencies

- Portfolio Management module
- Document Management module
- Unit Management module

## 5. Building Management (Optional) [Later]

- Building registration and information management
- Building-specific characteristics, infrastructure, and amenities
- Building-level maintenance and compliance tracking
- Building documents and certificates management
- Building value and depreciation tracking

## 6. Floor Management (Optional) [Later]

- Floor registration and layout management
- Floor-specific square footage and space allocation
- Floor plan documentation and visualization
- Floor-level amenities and infrastructure tracking
- Floor access control and security management

## 7. Unit Management [MVP]

### Functional Requirements

- Unit creation and management within properties/buildings/floors
- Detailed unit information (type, size, bedrooms, bathrooms, amenities)
- Unit photos, floor plans, and virtual tour links
- Unit availability status tracking (available, occupied, reserved, maintenance, unavailable)
- Unit grouping and categorization
- Unit condition tracking and inspection history
- Parking and storage unit assignments

### Database Tables

- `units` (id, organization_id, property_id, building_id, floor_id, unit_number, unit_type, bedrooms, bathrooms, sqft, status, market_rent_amount, current_rent_amount, created_at, updated_at, deleted_at)
- `unit_inspections` (id, unit_id, inspection_type, inspection_date, condition_rating, notes, inspected_by, created_at)

### API Endpoints

- `GET /api/properties/{property_id}/units` (list units)
- `POST /api/properties/{property_id}/units` (create unit)
- `GET /api/units/{id}` (get unit)
- `PUT /api/units/{id}` (update unit)
- `DELETE /api/units/{id}` (delete unit)
- `POST /api/units/bulk-import`
- `PUT /api/units/{id}/status` (update status)
- `GET /api/units/{id}/inspections` (inspection history)
- `POST /api/units/{id}/inspections` (create inspection)

### Integration Points

- Property Management module
- Document Management module (for photos/floor plans)
- Lease Management module (for occupancy status)

### Dependencies

- Property Management module
- Document Management module

## 8. Tenant Management [MVP]

### Functional Requirements

- Tenant registration with comprehensive information (personal, contact, employment, references)
- Tenant application processing workflow with status tracking
- Background check and credit screening integration
- Tenant credit history and scores maintenance
- Tenant information management and history tracking
- Tenant categorization (residential, commercial, corporate)
- Tenant communication preferences and contact methods
- Tenant satisfaction scores and feedback tracking
- Tenant blacklist/whitelist management

### Database Tables

- `tenants` (id, organization_id, full_name, email, phone, type, status, date_of_birth, ssn_tax_id, current_address, emergency_contact, communication_preferences, created_at, updated_at, deleted_at)
- `tenant_applications` (id, tenant_id, unit_id, status, application_date, approved_at, rejected_at, notes, created_at, updated_at)
- `tenant_credit_scores` (id, tenant_id, score, provider, report_date, created_at)

### API Endpoints

- `GET /api/tenants` (list with filters)
- `POST /api/tenants` (create)
- `GET /api/tenants/{id}` (get)
- `PUT /api/tenants/{id}` (update)
- `DELETE /api/tenants/{id}` (delete)
- `POST /api/tenants/{id}/applications` (submit application)
- `PUT /api/applications/{id}/status` (approve/reject)
- `GET /api/tenants/{id}/credit-score` (get credit score)
- `POST /api/tenants/{id}/blacklist` (add to blacklist)

### Integration Points

- Background check services (TransUnion, Experian, RentSpree)
- Communication module (for preferences)
- Lease Management module (for applications)

### Dependencies

- User Management module (for tenant portal accounts)
- Lease Management module

## 9. Lease Management [MVP]

### Functional Requirements

- Lease creation and management with comprehensive terms (dates, rent, deposits, conditions)
- Lease document generation from customizable templates
- Lease status tracking (draft, pending signature, active, expired, terminated, renewed)
- Lease amendments, addendums, and modifications support
- Prorated rent calculation for partial months and special circumstances
- Commercial lease terms support (base rent, percentage rent, CAM charges)
- Lease renewal workflow with automated reminders (30, 60, 90 days before expiration)
- Lease expiration tracking and renewal forecasting
- Lease termination processing with move-out workflows
- Security deposit tracking and return calculation

### Database Tables

- `leases` (id, organization_id, unit_id, tenant_id, property_id, start_date, end_date, rent_amount, deposit_amount, status, billing_cycle, payment_due_day, late_fee_amount, signed_at, created_at, updated_at, deleted_at)
- `lease_amendments` (id, lease_id, amendment_type, effective_date, changes, signed_at, created_at)

### API Endpoints

- `GET /api/leases` (list with filters)
- `POST /api/leases` (create)
- `GET /api/leases/{id}` (get)
- `PUT /api/leases/{id}` (update)
- `DELETE /api/leases/{id}` (delete)
- `POST /api/leases/{id}/generate-document` (generate lease document)
- `POST /api/leases/{id}/send-for-signature` (send for e-signature)
- `POST /api/leases/{id}/renew` (create renewal)
- `POST /api/leases/{id}/terminate` (terminate lease)
- `GET /api/leases/expiring` (list expiring leases)

### Integration Points

- E-Signature module (DocuSign, HelloSign)
- Document Management module (for lease documents)
- Payment module (for rent collection)
- Communication module (for renewal reminders)

### Dependencies

- Tenant Management module
- Unit Management module
- E-Signature Integration module
- Document Management module

## 10. Contract Management [Later]

- Vendor contracts and service agreements management
- Contract terms, expiration dates, and renewal tracking
- Contract renewal reminders and notifications
- Contract documents storage and management
- Contract performance and compliance tracking

## 11. E-Signature Integration [MVP]

- Integration with e-signature services (DocuSign, HelloSign, Adobe Sign)
- Electronic signing of leases and legal documents
- Signature status tracking and completion monitoring
- Multi-party signing workflows support
- Signed documents storage with legal validity

## 12. Rent Collection [MVP]

### Functional Requirements

- Rent due date tracking for each tenant based on lease terms
- Automated rent reminders (3, 5, 7 days before due date)
- Late payment notices with automatic generation
- Late fee calculation based on configurable rules and lease terms
- Multiple payment methods support (credit/debit cards, ACH, checks, cash)
- Secure online payment processing with PCI DSS compliance
- Automatic payment receipt generation via email and portal
- Recurring payment setup (automatic payments)
- Payment reconciliation with bank statements
- Payment status tracking (pending, completed, failed, refunded)

### Database Tables

- `payments` (id, organization_id, lease_id, tenant_id, property_id, unit_id, amount, currency, due_date, paid_at, status, payment_type, method, transaction_id, receipt_number, notes, created_at, updated_at, deleted_at)
- `payment_schedules` (id, lease_id, payment_date, amount, status, created_at) [for recurring payments]
- `late_fees` (id, payment_id, amount, calculated_at, applied_at, created_at)

### API Endpoints

- `GET /api/payments` (list with filters)
- `POST /api/payments` (create manual payment)
- `GET /api/payments/{id}` (get payment)
- `POST /api/payments/{id}/process` (process online payment)
- `POST /api/payments/{id}/refund` (refund payment)
- `GET /api/tenants/{id}/payments` (tenant payment history)
- `GET /api/leases/{id}/payments` (lease payment history)
- `POST /api/payments/bulk-reconcile` (reconcile with bank)
- `GET /api/payments/due-soon` (upcoming due payments)

### Integration Points

- Payment gateways (Stripe, PayPal, Authorize.net) for online payments
- Banking services (Plaid, Yodlee) for reconciliation
- Communication module (for reminders and receipts)
- Accounting module (for financial records)

### Dependencies

- Lease Management module
- Tenant Management module
- Payment Processing Integration module
- Communication & Notifications module

## 13. Expense Management [Later]

- Property expense recording with detailed categorization
- Expense categories (maintenance, utilities, insurance, taxes, management fees, vendor payments)
- Receipt and invoice attachment support
- Expense approval workflows with multi-level approvals
- Expense budget vs. actuals tracking with variance reporting
- Expense allocation across multiple properties or units
- Expense reports by category, property, and time period

## 14. Accounting & Financial Reporting [Later]

- General ledger maintenance for each property with double-entry accounting
- Comprehensive financial reports (income statements, balance sheets, cash flow statements)
- Rent roll reports with occupancy and collection rates
- Expense reports by category and property
- Profit and loss by property with comparisons
- Aged receivables and payables reports
- Budget vs. actual variance reports
- Tax preparation reports (1099, Schedule E)
- Multiple chart of accounts with customization
- Financial data export to accounting software (QuickBooks, Xero, Sage, Yardi)
- 1099 generation for vendors with IRS compliance
- Security deposit tracking separately in escrow accounts
- Accrual and cash basis accounting methods support

## 15. Banking Integration [Later]

- Bank account integration for automatic transaction import
- Multiple bank accounts per property, portfolio, or organization
- Automatic bank transaction reconciliation with matching rules
- Bank account aggregation services integration (Plaid, Yodlee)
- Bank account balances and transaction history tracking
- Bank reconciliation reports generation

## 16. Payment Processing Integration [Later]

- Payment gateway integration (Stripe, PayPal, Authorize.net, Square)
- ACH processing for direct bank transfers
- Payment processing fees handling and allocation
- Payment refunds and reversals support
- PCI DSS compliance for payment processing

## 17. Maintenance Request Handling [MVP]

### Functional Requirements

- Tenant maintenance request submission with detailed descriptions
- Priority level selection (emergency, urgent, routine, cosmetic)
- Photo and file attachment support
- Automatic request assignment to property managers based on property/unit
- Property manager assignment to vendors or internal technicians
- Request status tracking (submitted, acknowledged, assigned, in progress, completed, closed, cancelled)
- Automated status updates to tenants via email and WhatsApp
- Vendor portal for request status updates
- Request escalation for overdue items with notifications
- Tenant feedback and satisfaction ratings after completion

### Database Tables

- `maintenance_requests` (id, organization_id, property_id, unit_id, tenant_id, title, description, priority, status, submitted_at, created_at, updated_at, deleted_at)
- `maintenance_request_feedback` (id, maintenance_request_id, tenant_id, rating, comments, created_at)

### API Endpoints

- `GET /api/maintenance-requests` (list with filters)
- `POST /api/maintenance-requests` (create)
- `GET /api/maintenance-requests/{id}` (get)
- `PUT /api/maintenance-requests/{id}` (update status)
- `POST /api/maintenance-requests/{id}/assign` (assign to technician/vendor)
- `POST /api/maintenance-requests/{id}/escalate` (escalate)
- `POST /api/maintenance-requests/{id}/feedback` (submit feedback)
- `GET /api/tenants/{id}/maintenance-requests` (tenant's requests)

### Integration Points

- Work Order Management module (converts request to work order)
- Communication module (for status updates)
- Document Management module (for photos/attachments)

### Dependencies

- Tenant Management module
- Property Management module
- Work Order Management module
- Communication & Notifications module

## 18. Work Order Management [MVP]

### Functional Requirements

- Work order generation from maintenance requests with detailed information
- Work order assignment to vendors or internal staff with scheduling
- Work order completion, costs, and time spent tracking
- Photo documentation of work before, during, and after completion
- Work order approval workflows for high-cost items
- Invoice generation from completed work orders
- Work order history and maintenance patterns tracking
- Work order routing and scheduling optimization

### Database Tables

- `work_orders` (id, organization_id, maintenance_request_id, property_id, unit_id, tenant_id, title, description, priority, status, assigned_to_user_id, assigned_to_vendor_id, scheduled_date, completed_at, cost_amount, invoice_number, created_at, updated_at, deleted_at)
- `work_order_approvals` (id, work_order_id, approver_id, status, comments, approved_at, created_at)

### API Endpoints

- `GET /api/work-orders` (list with filters)
- `POST /api/work-orders` (create)
- `GET /api/work-orders/{id}` (get)
- `PUT /api/work-orders/{id}` (update)
- `POST /api/work-orders/{id}/assign` (assign to technician/vendor)
- `PUT /api/work-orders/{id}/status` (update status)
- `POST /api/work-orders/{id}/complete` (mark completed)
- `POST /api/work-orders/{id}/approve` (approve for high-cost)
- `GET /api/work-orders/{id}/history` (work order history)

### Integration Points

- Maintenance Request Handling module
- Vendor Management module (for vendor assignment)
- Document Management module (for photos/documentation)
- Communication module (for status updates)

### Dependencies

- Maintenance Request Handling module
- Vendor Management module (basic)
- Document Management module

## 19. Preventive Maintenance [Later]

- Recurring maintenance task scheduling (HVAC servicing, inspections, etc.)
- Automated reminders for scheduled maintenance
- Maintenance history tracking per property, unit, and equipment
- Preventive maintenance reports and schedules generation
- Equipment tracking and maintenance schedules
- Warranty information and expiration date tracking

## 20. Vendor Management [Later]

- Comprehensive vendor database with contact information and business details
- Service categories and specialties tracking
- Insurance and licensing information with expiration tracking
- Vendor performance metrics tracking (response time, completion time, quality, cost)
- Vendor portal for work order access and status updates
- Vendor rating and review system
- Vendor payment processing and tracking
- Vendor performance reports generation

## 21. Document Management [MVP]

### Functional Requirements

- Document storage for properties, tenants, financial, maintenance, legal, and compliance
- Multiple file format support (PDF, images, Word, Excel, text)
- Document organization by category, property, tenant, and date
- Document version history with change tracking
- Document tagging and search functionality
- Document access controls based on user roles
- Document expiration tracking and reminders
- Document generation from templates (leases, notices, financial statements)
- Bulk document generation for multiple tenants
- Document security with encryption at rest and in transit
- Document access audit logs
- Document retention policies based on legal requirements
- Secure document sharing with links and expiration

### Database Tables

- `documents` (id, organization_id, name, file_name, file_path, file_size, mime_type, document_type, entity_type, entity_id, category, is_public, expires_at, uploaded_by, created_at, updated_at, deleted_at)
- `document_versions` (id, document_id, version_number, file_path, changes, created_by, created_at)
- `document_shares` (id, document_id, share_token, expires_at, access_count, created_at)

### API Endpoints

- `GET /api/documents` (list with filters)
- `POST /api/documents` (upload)
- `GET /api/documents/{id}` (get/download)
- `PUT /api/documents/{id}` (update metadata)
- `DELETE /api/documents/{id}` (delete)
- `GET /api/documents/{id}/versions` (version history)
- `POST /api/documents/{id}/share` (create share link)
- `GET /api/documents/generate` (generate from template)
- `POST /api/documents/bulk-generate` (bulk generation)

### Integration Points

- File storage service (AWS S3, Azure Blob, etc.)
- All modules (for document storage)
- E-Signature module (for signed documents)

### Dependencies

- File storage infrastructure
- RBAC module (for access control)

## 22. Communication & Notifications [MVP]

### Functional Requirements

- In-app messaging between users and tenants with real-time support
- Group messaging for property-wide announcements
- Complete message history with search functionality
- Email notifications for new messages when user is offline
- File attachments in messages
- Message read receipts and delivery status
- Automated email sending (rent reminders, maintenance updates, lease renewals, payment confirmations)
- Customizable email templates with branding
- Bulk email campaigns to tenant segments
- Email delivery and open rate tracking
- Email scheduling and automation rules
- WhatsApp notifications for urgent alerts (maintenance emergencies, payment reminders)
- Two-way WhatsApp communication support
- WhatsApp opt-in/opt-out management
- Push notifications to mobile applications
- Notification preferences and settings management

### Database Tables

- `messages` (id, organization_id, sender_id, recipient_id, recipient_type, subject, body, status, read_at, created_at, updated_at)
- `message_attachments` (id, message_id, document_id, created_at)
- `notifications` (id, organization_id, user_id, tenant_id, type, title, message, channel, status, sent_at, read_at, metadata, created_at)
- `notification_preferences` (id, user_id, tenant_id, notification_type, channel, enabled, created_at, updated_at)
- `email_templates` (id, organization_id, name, subject, body, type, created_at, updated_at)

### API Endpoints

- `GET /api/messages` (list conversations)
- `POST /api/messages` (send message)
- `GET /api/messages/{id}` (get message)
- `PUT /api/messages/{id}/read` (mark as read)
- `GET /api/notifications` (list notifications)
- `PUT /api/notifications/{id}/read` (mark as read)
- `GET /api/notification-preferences` (get preferences)
- `PUT /api/notification-preferences` (update preferences)
- `GET /api/email-templates` (list templates)
- `POST /api/email-templates` (create template)
- `POST /api/notifications/send` (send notification)

### Integration Points

- Email service (SendGrid, Mailgun, AWS SES)
- WhatsApp API (Meta Business API, Twilio WhatsApp API)
- Push notification service (FCM, APNS)
- All modules (for automated notifications)

### Dependencies

- User Management module
- Tenant Management module

## 23. Tenant Portal & Self-Service [MVP]

### Functional Requirements

- Comprehensive self-service tenant portal (web and mobile)
- Secure tenant authentication with password and optional 2FA
- Tenant account dashboard with key information and alerts
- Payment history, statements, and downloadable receipts
- Online rent payment with multiple payment methods
- Maintenance request submission with photos and tracking
- Lease document access and account information
- Communication center for messaging with property management
- Profile management and contact information updates
- Document upload capabilities for tenant submissions
- Intuitive, user-friendly interface requiring minimal training
- Mobile-responsive and optimized for smartphones
- Accessibility standards compliance (WCAG 2.1 AA)
- Contextual help and support resources

### Database Tables

- Uses existing tables: tenants, payments, leases, maintenance_requests, documents, messages
- `tenant_portal_sessions` (id, tenant_id, token, expires_at, created_at)

### API Endpoints (Tenant-facing)

- `POST /api/tenant/auth/login`
- `POST /api/tenant/auth/logout`
- `GET /api/tenant/dashboard` (dashboard data)
- `GET /api/tenant/profile` (get profile)
- `PUT /api/tenant/profile` (update profile)
- `GET /api/tenant/payments` (payment history)
- `POST /api/tenant/payments` (make payment)
- `GET /api/tenant/leases` (active lease)
- `GET /api/tenant/maintenance-requests` (requests)
- `POST /api/tenant/maintenance-requests` (submit request)
- `GET /api/tenant/documents` (accessible documents)
- `GET /api/tenant/messages` (messages)
- `POST /api/tenant/messages` (send message)

### Integration Points

- User Management module (for authentication)
- Payment module (for online payments)
- Maintenance Request module
- Document Management module
- Communication module

### Dependencies

- User Management & Authentication module
- Rent Collection module
- Maintenance Request Handling module
- Document Management module
- Communication & Notifications module

## 24. Mobile Access [MVP - Responsive Web Only]

- Responsive web application optimized for mobile devices
- Core features on mobile web (property info, maintenance, payments, documents, communication)
- Progressive Web App (PWA) capabilities for offline functionality
- Mobile push notifications support via web push API
- Camera integration for photo capture and document scanning via web APIs
- Touch-optimized interface for mobile devices
- Web-only development (responsive design)

## 25. Reporting & Analytics [MVP - Basic Reports]

### Functional Requirements

- Pre-built standard reports (occupancy, rent roll, financial performance, maintenance costs, tenant turnover, collection)
- Report filtering by property, portfolio, date range, and custom criteria
- Report export in multiple formats (PDF, Excel, CSV)
- Scheduled report generation and automated email delivery
- Report customization and saved report configurations
- Custom report builder with drag-and-drop interface
- Report templates and sharing between users
- Advanced filtering, grouping, and sorting options
- Customizable dashboards with key metrics (occupancy rate, rent collection rate, NOI, maintenance status, financial summaries)
- Role-based dashboard views (executive, property manager, accountant)
- Real-time data updates with refresh capabilities
- Dashboard widgets and customization
- Dashboard sharing and export
- Trend analysis (rent trends, expense trends, occupancy trends)
- Performance comparison across properties, portfolios, and time periods
- Predictive analytics for maintenance and expenses
- AI-powered insights and recommendations using vector matching
- Data visualization with charts and graphs
- Benchmarking against industry standards

### Database Tables

- `report_templates` (id, organization_id, name, type, configuration, created_by, created_at, updated_at)
- `saved_reports` (id, organization_id, user_id, name, template_id, filters, created_at)
- `scheduled_reports` (id, organization_id, report_template_id, schedule, recipients, last_run_at, next_run_at, created_at)
- `dashboards` (id, organization_id, user_id, name, widgets, created_at, updated_at)

### API Endpoints

- `GET /api/reports/occupancy` (occupancy report)
- `GET /api/reports/rent-roll` (rent roll report)
- `GET /api/reports/financial` (financial report)
- `GET /api/reports/maintenance` (maintenance report)
- `POST /api/reports/custom` (generate custom report)
- `GET /api/reports/{id}` (get saved report)
- `POST /api/reports/{id}/export` (export report)
- `GET /api/dashboards` (list dashboards)
- `POST /api/dashboards` (create dashboard)
- `GET /api/dashboards/{id}` (get dashboard data)
- `PUT /api/dashboards/{id}` (update dashboard)
- `POST /api/reports/schedule` (schedule report)

### Integration Points

- All modules (for data aggregation)
- Communication module (for scheduled report delivery)
- Document Management module (for report storage)

### Dependencies

- All data modules (for report data)
- Communication & Notifications module

## 26. Integration Capabilities [MVP - Minimal Integrations]

- RESTful API for third-party integrations
- Webhook notifications for events (payment received, lease signed, etc.)
- Comprehensive API documentation (OpenAPI/Swagger)
- API authentication (OAuth 2.0, API keys)
- API rate limiting and throttling
- Payment gateway integrations (Stripe, PayPal, Authorize.net, Square)
- Accounting software integrations (QuickBooks, Xero, Sage, Yardi)
- Email service provider integrations (SendGrid, Mailgun, AWS SES)
- WhatsApp API integrations (Meta Business API, Twilio WhatsApp API)
- E-signature service integrations (DocuSign, HelloSign, Adobe Sign)
- Background check integrations (TransUnion, Experian, RentSpree)
- Bank aggregation integrations (Plaid, Yodlee)
- Bi-directional data synchronization support
- Standard data format exports (CSV, QIF, OFX)

## 27. Compliance & Legal [Later]

- Fair housing laws compliance support
- Required legal notices generation (rent increase, lease violation, eviction, termination)
- Compliance checklists maintenance
- Jurisdiction-specific requirements support
- Comprehensive audit trails for all financial and operational activities
- Financial transaction logging
- Document change logging
- User access and action logging
- Immutable audit logs maintenance
- GDPR and CCPA compliance support
- Data export and deletion requests per regulations
- Data processing agreements and privacy policies maintenance

## 28. Common Spaces Management [Later]

- Common space registration and tracking (lobbies, hallways, corridors, stairwells)
- Common space location, square footage, and usage tracking
- Common area factor calculations for commercial leases
- Common space maintenance responsibility and cost tracking
- Common space access control and usage restrictions
- Common space cleaning schedules and maintenance tracking

## 29. Amenities Management [Later]

- Amenity registration and tracking (pool, gym, clubhouse, rooftop, etc.)
- Amenity location tracking (property-level, building-level, floor-level)
- Amenity access levels and usage rules management
- Amenity booking requirements and fee management
- Amenity operating hours and seasonal availability
- Amenity capacity limits and usage tracking
- Amenity maintenance schedules and cost tracking
- Amenity insurance coverage management

## 30. Infrastructure Management [Later]

- Lift/Elevator tracking with maintenance schedules and compliance certificates
- Parking space management and assignment
- Utility meter tracking and management
- HVAC system tracking and maintenance schedules
- Fire safety systems tracking
- Security systems management
- Infrastructure service contracts and warranty tracking

## 31. Parking Management [Later]

- Parking space registration and tracking
- Parking space assignment to units/tenants
- Client/owner-specific parking integration (parking spaces assigned to specific clients or owners)
- Parking fee collection and management
- Parking space type tracking (covered, uncovered, garage, street)
- EV charging availability tracking
- Accessibility features tracking
- Parking reservation system support
- Parking space ownership and assignment tracking

## 32. Data Management & Migration [MVP - Basic Import/Export]

- Data import from common formats (CSV, Excel, JSON)
- Bulk data operations support
- Data validation and quality monitoring
- Data migration tools from legacy property management systems
- Incremental data migration and synchronization
- Data archival for old records
- Data retention policies based on legal requirements
- Data purging per retention policies
- Data anonymization and pseudonymization support
- Data portability requests support

## 33. Sales & Visits Management [MVP]

### Functional Requirements

- Sales representative management with leave tracking
- Property visit scheduling and coordination
- Automatic visit postponement when sales rep is on leave (reschedule to next available slot)
- Client interest tracking in properties (property details visibility only)
- Visit access restrictions: 
  - Clients cannot access visit schedules or visit details
  - Clients can only view property details they are interested in (via client_property_interest)
  - Sales reps have full access to visit schedules and coordination
  - Property managers can view visits for their assigned properties
- Sales rep access to visit schedules and coordination
- Visit status tracking (scheduled, completed, cancelled, postponed)
- Visit outcome and feedback recording
- Integration with property availability and access management
- Visit calendar management with availability checking

### Database Tables

- `sales_reps` (id, organization_id, user_id, status, created_at, updated_at, deleted_at)
- `property_visits` (id, organization_id, property_id, unit_id, sales_rep_id, client_id, scheduled_date, scheduled_time, status, visit_type, notes, outcome, feedback, created_at, updated_at, deleted_at)
- `sales_rep_leave` (id, organization_id, sales_rep_id, start_date, end_date, leave_type, status, created_at, updated_at, deleted_at)
- `client_property_interest` (id, organization_id, client_id, property_id, interest_level, notes, created_at, updated_at, deleted_at)

### API Endpoints

- `GET /api/sales-reps` (list sales representatives)
- `POST /api/sales-reps` (create sales rep assignment)
- `GET /api/sales-reps/{id}/visits` (list sales rep visits)
- `GET /api/visits` (list property visits with filters)
- `POST /api/visits` (schedule property visit)
- `GET /api/visits/{id}` (get visit details)
- `PUT /api/visits/{id}` (update visit)
- `POST /api/visits/{id}/postpone` (postpone visit)
- `POST /api/visits/{id}/complete` (mark visit completed)
- `GET /api/sales-reps/{id}/leave` (get leave schedule)
- `POST /api/sales-reps/{id}/leave` (create leave record)
- `GET /api/clients/{id}/property-interests` (get client property interests)
- `POST /api/clients/{id}/property-interests` (record property interest)

### Integration Points

- Property Management module (for property details)
- User Management module (for sales rep and client accounts)
- Calendar/Notification module (for visit scheduling and reminders)

### Dependencies

- Property Management module
- User Management module
- Communication & Notifications module

## 34. Canteen Management [Later - Idea/Placeholder]

### Functional Requirements

- Canteen space registration and tracking
- Canteen lease/contract management (can be lent or contract-based agreement)
- Canteen assignment to clients, tenants, or external parties
- Canteen usage tracking and management
- Contract terms and agreement management for canteen spaces
- Canteen fee collection and tracking
- Canteen access control and scheduling

### Database Tables

- `canteens` (id, organization_id, property_id, name, capacity, status, created_at, updated_at, deleted_at)
- `canteen_agreements` (id, organization_id, canteen_id, client_id, tenant_id, agreement_type, start_date, end_date, fee_amount, terms, status, created_at, updated_at, deleted_at)

### API Endpoints

- `GET /api/canteens` (list canteens)
- `POST /api/canteens` (create canteen)
- `GET /api/canteens/{id}` (get canteen details)
- `PUT /api/canteens/{id}` (update canteen)
- `GET /api/canteens/{id}/agreements` (list canteen agreements)
- `POST /api/canteens/{id}/agreements` (create canteen agreement)

### Integration Points

- Property Management module
- Lease Management module (for contract-based agreements)
- Payment module (for fee collection)

### Dependencies

- Property Management module
- Lease Management module (optional)

## 35. System Administration [MVP]

### Functional Requirements

- System configuration and settings management
- Feature flags for gradual rollouts
- Multi-tenant architecture support with data isolation
- Tenant-specific customization and branding
- Resource allocation and limits per organization
- System health monitoring and alerting
- Performance monitoring and optimization
- Backup and disaster recovery management
- System updates and deployment management
- Dynamic database field support (schema changes without API modifications via query/request params)
- Highly configurable role system (adaptable to company size: small companies may have only owners, large companies have multiple managers and sales reps)
- Recycle bin management (all deleted records stored with deleted_at, only Super Admin can permanently delete)
- Parent-child relationship deletion handling (detach child by default, cascade optional with confirmation)

### Database Tables

- `organizations` (id, name, code, type, status, subscription_tier, settings, created_at, updated_at, deleted_at)
- `system_settings` (id, organization_id, key, value, type, description, created_at, updated_at)
- `feature_flags` (id, organization_id, feature_name, enabled, rollout_percentage, created_at, updated_at)

### API Endpoints

- `GET /api/admin/organizations` (list organizations)
- `POST /api/admin/organizations` (create organization)
- `GET /api/admin/organizations/{id}` (get organization)
- `PUT /api/admin/organizations/{id}` (update organization)
- `GET /api/admin/settings` (get settings)
- `PUT /api/admin/settings` (update settings)
- `GET /api/admin/feature-flags` (list feature flags)
- `PUT /api/admin/feature-flags/{id}` (update feature flag)
- `GET /api/admin/health` (system health check)
- `GET /api/admin/metrics` (system metrics)

### Integration Points

- All modules (for organization-level settings)
- Monitoring services (for health checks)

### Dependencies

- All modules (for system-wide administration)

## Technical Specifications Summary

**Modules with Complete Technical Specifications:** 15 (MVP modules)

- User Management & Authentication
- Role-Based Access Control (RBAC)
- Portfolio Management
- Property Management
- Unit Management
- Tenant Management
- Lease Management
- Rent Collection
- Maintenance Request Handling
- Work Order Management
- Document Management
- Communication & Notifications
- Tenant Portal & Self-Service
- Reporting & Analytics
- System Administration

**Technical Documentation Includes:**

- Database schema definitions with field specifications
- RESTful API endpoint design (160+ endpoints documented)
- External service integration points
- Module dependencies and relationships
- Dynamic schema support for flexible data model evolution
- Parent-child deletion behavior (detach vs cascade)
- Recycle bin functionality with Super Admin permanent deletion

**Total Modules:** 35

**Total API Endpoints Documented:** 160+

**Total Database Tables Documented:** 60+
