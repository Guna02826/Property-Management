# Neorem - Workflow Diagrams Summary

## Overview
This document provides visual representations and summaries of key workflows in the Neorem Property Management System.

## Workflow Diagram Notation

```
┌─────────────┐
│   Process   │  = Process/Step
└─────────────┘

┌─────────────┐
│  Decision   │  = Decision Point
└─────────────┘

┌─────────────┐
│   External  │  = External System/Service
└─────────────┘

    ────►     = Flow Direction
    
    ──┐       = Merge
      └───►
    
    ──┴──►    = Split/Parallel
    ──┬──►
```

## 1. User Onboarding Workflow

```
┌─────────────────┐
│  Super Admin    │
│  Creates Org    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Organization   │
│  Created        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Owner Account  │
│  Created        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Email Invite   │
│  Sent           │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Owner Completes│
│  Profile Setup  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Onboarding     │
│  Complete       │
└─────────────────┘
```

## 2. Property Setup Workflow

```
┌─────────────────┐
│  Create         │
│  Portfolio      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Create         │
│  Property       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Validate       │
│  Address        │
│  (Geocoding)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Assign Property│
│  Manager        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Create Units   │
│  (Bulk/Individual)│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Upload         │
│  Documents      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Activate       │
│  Property       │
└─────────────────┘
```

## 3. Tenant Onboarding Workflow

```
┌─────────────────┐
│  Tenant         │
│  Registration   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Application    │
│  Submission     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Background     │
│  Check          │
│  (Optional)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Application    │
│  Review         │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Approved│  │Rejected│
└───┬───┘  └──────┘
    │
    ▼
┌─────────────────┐
│  Create Lease   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Generate       │
│  Lease Document │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Send for       │
│  E-Signature    │
│  (DocuSign)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Tenant Signs   │
│  Lease          │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Lease Active   │
│  Unit Occupied  │
└─────────────────┘
```

## 4. Payment Processing Workflow

```
┌─────────────────┐
│  Generate       │
│  Payment Due    │
│  (Automated)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Send Payment   │
│  Reminder       │
│  (3/5/7 days)   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Payment        │
│  Submission     │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Portal│  │Manual│
│Entry │  │Entry │
└───┬──┘  └───┬──┘
    │         │
    └────┬────┘
         │
         ▼
┌─────────────────┐
│  Payment        │
│  Recorded       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Check if       │
│  Overdue        │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│On Time│  │Overdue│
└──────┘  └───┬──┘
              │
              ▼
      ┌───────────────┐
      │ Calculate     │
      │ Late Fee      │
      └───────┬───────┘
              │
              ▼
      ┌───────────────┐
      │ Generate      │
      │ Receipt       │
      └───────────────┘
```

## 5. Maintenance Request Workflow

```
┌─────────────────┐
│  Tenant         │
│  Submits        │
│  Request        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Property       │
│  Manager        │
│  Acknowledges   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Request        │
│  Triage         │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Create Work    │
│  Order          │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Assign Work    │
│  Order          │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Tech  │  │Vendor│
└───┬──┘  └───┬──┘
    │         │
    └────┬────┘
         │
         ▼
┌─────────────────┐
│  Work           │
│  Execution      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Work           │
│  Completed      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Tenant         │
│  Feedback       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Request        │
│  Closed         │
└─────────────────┘
```

## 6. Lease Renewal Workflow

```
┌─────────────────┐
│  System Checks  │
│  Expiring Leases│
│  (90/60/30 days)│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Send Renewal   │
│  Reminder       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Property       │
│  Manager        │
│  Creates        │
│  Renewal Offer  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Send Renewal   │
│  Offer to Tenant│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Tenant         │
│  Accepts/Rejects│
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Accepts│  │Rejects│
└───┬──┘  └──────┘
    │
    ▼
┌─────────────────┐
│  New Lease      │
│  Sent for       │
│  E-Signature    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Lease Signed   │
│  & Activated    │
└─────────────────┘
```

## 7. DocuSign Integration Workflow

```
┌─────────────────┐
│  Generate       │
│  Lease Document │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Store Document │
│  in GCS         │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Create DocuSign│
│  Envelope       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  DocuSign       │
│  Sends          │
│  Invitation     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Tenant Signs   │
│  Document       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  DocuSign       │
│  Webhook        │
│  Received       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Download       │
│  Signed         │
│  Document       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Store Signed   │
│  Document       │
│  Activate Lease │
└─────────────────┘
```

## 8. Error Handling Workflow

```
┌─────────────────┐
│  Error          │
│  Detected       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Log Error      │
│  with Context   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Determine      │
│  Error Type     │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Retry │  │Rollback│
│able  │  │       │
└───┬──┘  └───┬──┘
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Retry │  │Rollback│
│Logic │  │Transaction│
└───┬──┘  └───┬──┘
    │         │
    └────┬────┘
         │
         ▼
┌─────────────────┐
│  Notify User    │
│  & Admin        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Send to        │
│  Monitoring     │
└─────────────────┘
```

## 9. Data Recovery Workflow

```
┌─────────────────┐
│  User Requests  │
│  Recovery       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Validate       │
│  Permissions    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Query Recycle  │
│  Bin            │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Identify       │
│  Deleted        │
│  Records        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Validate Data  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Restore        │
│  Records        │
│  (deleted_at =  │
│   NULL)         │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Restore        │
│  Related        │
│  Records        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Verify Data    │
│  Integrity      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Notify User    │
│  Recovery       │
│  Complete       │
└─────────────────┘
```

## 10. Deployment Workflow

```
┌─────────────────┐
│  Pre-Deployment │
│  Checklist      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Deploy to      │
│  Staging        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Run Tests      │
│  (Smoke,        │
│   Integration)  │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Pass  │  │Fail  │
└───┬──┘  └───┬──┘
    │         │
    │         └───► Fix Issues
    │
    ▼
┌─────────────────┐
│  Create Backup  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Run Database   │
│  Migration      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Deploy to      │
│  Production     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Run Health     │
│  Checks         │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────┐  ┌──────┐
│Pass  │  │Fail  │
└───┬──┘  └───┬──┘
    │         │
    │         └───► Rollback
    │
    ▼
┌─────────────────┐
│  Post-Deploy   │
│  Validation    │
└─────────────────┘
```

## Workflow Interaction Map

```
┌─────────────────────────────────────────────────────────┐
│                    User Onboarding                       │
│  ────────────────────────────────────────────────────   │
│  ──► Property Setup ──► Tenant Onboarding ──► Lease     │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│                    Lease Management                      │
│  ────────────────────────────────────────────────────   │
│  ──► Payment Processing ──► Maintenance Requests       │
└─────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────┐
│              Reporting & Analytics                     │
│  ────────────────────────────────────────────────────   │
│  ──► System Administration ──► Monitoring              │
└─────────────────────────────────────────────────────────┘
```

## Key Workflow Characteristics

### State Management
- All workflows maintain state
- State transitions are logged
- Rollback capabilities for failed states

### Error Handling
- All workflows have error handling
- Retry logic for transient failures
- User notification on errors

### Audit Trail
- All workflow steps logged
- Before/after states captured
- User actions tracked

### Integration Points
- External services integrated
- Webhook handling
- API integrations

### Scalability
- Workflows designed for horizontal scaling
- Async processing where possible
- Queue-based processing

## Workflow Metrics

### Performance Targets
- User Onboarding: < 5 minutes
- Property Setup: < 15 minutes
- Tenant Onboarding: < 30 minutes
- Payment Processing: < 1 minute
- Maintenance Request: < 2 minutes
- Report Generation: < 30 seconds

### Success Rates
- Target: > 99% success rate
- Error rate: < 1%
- Retry success rate: > 80%

## Notes
- All workflows are idempotent where possible
- All workflows support rollback
- All workflows are logged and audited
- All workflows are tested and validated

